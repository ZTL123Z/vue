<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./Ê∞¥Êûú.css" />
    <!-- ÂºÄÂèëÁéØÂ¢ÉÁâàÊú¨ÔºåÂåÖÂê´‰∫ÜÊúâÂ∏ÆÂä©ÁöÑÂëΩ‰ª§Ë°åË≠¶Âëä -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
</head>
<body>
    <div class="app-container" id="app">
    <!-- banner  -->
    <div class="banner-box"><img src="../img/fruit.jpg" alt=""></div>
    <!-- Èù¢ÂåÖÂ±ë -->
    <div class="breadcrumb">
        <span>üè†</span>
        /
        <span>Ë¥≠Áâ©ËΩ¶</span>
    </div>
    <!-- ‰∏ª‰Ωì -->
    <div class="main" v-if="fruitList.length > 0">

        <div class="table">
            <!-- Â§¥ÈÉ® -->
            <div class="thead">
                <div class="tr">
                    <div class="th">ÈÄâ‰∏≠</div>
                    <div class="th th-pic">ÂõæÁâá</div>
                    <div class="th">Âçï‰ª∑</div>
                    <div class="th num-th">‰∏™Êï∞</div>
                    <div class="th">Â∞èËÆ°</div>
                    <div class="th">Êìç‰Ωú</div>
                </div>
            </div>
            <!-- Ë∫´‰Ωì -->
            <div class="tbody">
                <div v-for="(item, index) in fruitList" :key="item.id" class="tr" :class="{'active': item.isChecked}">
                    <div class="td"><input type="checkbox" v-model="item.isChecked"></div>
                    <div class="td td-pic"><img :src="item.icon" alt=""></div>
                    <div class="td">{{ item.price }}</div>
                    <div class="td">
                        <div class="my-input-number">
                            <button :disabled="item.num <= 1" class="decrease" @click="sub(item.id)">-</button>
                            <span class="my-input__inner">{{ item.num }}</span>
                            <button class="increase" @click="add(item.id)">+</button>
                        </div>
                    </div>
                    <div class="td">{{ item.price * item.num }}</div>
                    <div class="td"><button @click="del(item.id)">Âà†Èô§</button></div>
                </div>
            </div>
        </div>
        <!-- Â∫ïÈÉ® -->
        <div class="bottom">
            <label class="check-all">
                <input type="checkbox" v-model="isAll"> ÂÖ®ÈÄâ / ÂèñÊ∂àÂÖ®ÈÄâ {{ totalCount }} / {{ totalPrice }}>
            </label>
            <div class="right-box">
                <span class="price-box">ÊÄª‰ª∑&nbsp;&nbsp;:&nbsp;&nbsp;¬•&nbsp;<span class="price">{{ totalPrice }}</span></span>
                <button class="pay">ÁªìÁÆó( {{ totalCount }} )</button>
            </div>
        </div>

    </div>
    <!-- Á©∫ËΩ¶ -->
    <div class="empty" v-else>üõíÁ©∫Á©∫Â¶Ç‰πü</div>
    </div>
    <script>
        const app = new Vue({
            el: '#app',
            data: {
                fruitList: [
                    {
                    id: 1,
                    icon: '../img/ÁÅ´ÈæôÊûú.png',
                    isChecked: true,
                    num: 2,
                    price: 6,
                    },
                    {
                    id: 2,
                    icon: '../img/ËçîÊûù.png',
                    isChecked: false,
                    num: 7,
                    price: 20,
                    },
                    {
                    id: 3,
                    icon: '../img/Ê¶¥Ëé≤.png',
                    isChecked: false,
                    num: 3,
                    price: 40,
                    },
                    {
                    id: 4,
                    icon: '../img/È∏≠Ê¢®.png',
                    isChecked: true,
                    num: 10,
                    price: 3,
                    },
                    {
                    id: 5,
                    icon: '../img/Ê®±Ê°É.png',
                    isChecked: false,
                    num: 20,
                    price: 34,
                    },
                ],
            },
            computed:{
                isAll:{
                    get(){ 
                        return this.fruitList.every(item => item.isChecked) 
                    }, 
                    set(val){   
                        this.fruitList.forEach(item => item.isChecked = val)    
                    }
                },
                totalCount(){ 
                    return this.fruitList.reduce((sum, item) =>{
                        if (item.isChecked){
                            sum += item.num
                        } else {
                            sum += 0
                        }
                        return sum
                    }, 0)
                },
                totalPrice(){
                    return this.fruitList.reduce((sum, item) => {
                        if (item.isChecked){
                            sum += item.num * item.price
                        } else {
                            sum += 0
                        }
                        return sum
                    }, 0)
                }
            },
            methods:{
                del (id) {
                    this.fruitList = this.fruitList.filter(item => item.id !== id)
                },
                add (id) {
                    this.fruitList.find(item => item.id === id).num++
                },
                sub(id) {
                    this.fruitList.find(item => item.id === id).num--
                }
            },
        })
    </script>
</body>
</html>

<style>

</style>